function showOrder(mode,var_content,file){$.get(file,((mode===1)?{'id_order':var_content,'ajax':true}:{'id_order_return':var_content,'ajax':true}),function(data){$('#block-order-detail').fadeOut('slow',function(){$(this).html(data);if($('#order-detail-content .order_cb').length>0){$('#order-detail-content th input[type=checkbox]').click(function(){$('#order-detail-content td input[type=checkbox]').each(function(){this.checked=$('#order-detail-content th input[type=checkbox]').is(':checked');updateOrderLineDisplay(this)})});$('#order-detail-content td input[type=checkbox]').click(function(){updateOrderLineDisplay(this)});$('#order-detail-content td .order_qte_input').keyup(function(){var maxQuantity=parseInt($(this).parent().find('.order_qte_span').text());var quantity=parseInt($(this).val());if(isNaN($(this).val())&&$(this).val()!==''){$(this).val(maxQuantity)}else{if(quantity>maxQuantity)$(this).val(maxQuantity);else if(quantity<1)$(this).val(1)}})}$('form#sendOrderMessage').submit(function(){return sendOrderMessage()});$(this).fadeIn('slow',function(){$.scrollTo(this,1200);resizeAddressesBox()})})})}function updateOrderLineDisplay(domCheckbox){var lineQuantitySpan=$(domCheckbox).parent().parent().find('.order_qte_span');var lineQuantityInput=$(domCheckbox).parent().parent().find('.order_qte_input');if($(domCheckbox).is(':checked')){lineQuantitySpan.hide();lineQuantityInput.show()}else{lineQuantityInput.hide();lineQuantityInput.val(lineQuantitySpan.text());lineQuantitySpan.show()}}function sendOrderMessage(){paramString="ajax=true";$('#sendOrderMessage').find('input, textarea, select').each(function(){paramString+='&'+$(this).attr('name')+'='+encodeURIComponent($(this).val())});$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:$('#sendOrderMessage').attr("action")+'?rand='+new Date().getTime(),data:paramString,success:function(msg){$('#block-order-detail').fadeOut('slow',function(){$(this).html(msg);$('#sendOrderMessage').submit(function(){return sendOrderMessage()});$(this).fadeIn('slow')})}});return false}